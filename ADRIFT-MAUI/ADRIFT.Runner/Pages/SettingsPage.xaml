<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ADRIFT.Runner.Pages.SettingsPage"
             Title="Settings"
             Shell.NavBarIsVisible="True">

    <ScrollView>
        <VerticalStackLayout Padding="15" Spacing="20">

            <!-- Display Settings Section -->
            <Frame BorderColor="{StaticResource ADRIFTPrimary}" Padding="15" CornerRadius="8">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Display Settings" FontSize="18" FontAttributes="Bold"/>

                    <!-- Text Size -->
                    <VerticalStackLayout Spacing="5">
                        <Label Text="Text Size" FontSize="14" FontAttributes="Bold"/>
                        <Grid ColumnDefinitions="*,Auto" ColumnSpacing="10">
                            <Slider Grid.Column="0" x:Name="TextSizeSlider"
                                    Minimum="10" Maximum="24" Value="14"
                                    ValueChanged="OnTextSizeChanged"/>
                            <Label Grid.Column="1" x:Name="TextSizeLabel"
                                   Text="14" FontSize="14" VerticalOptions="Center"
                                   WidthRequest="30" HorizontalTextAlignment="End"/>
                        </Grid>
                        <Label Text="The quick brown fox jumps over the lazy dog"
                               x:Name="PreviewText" FontSize="14"
                               Padding="10" BackgroundColor="{StaticResource Gray100}"
                               TextColor="Black"/>
                    </VerticalStackLayout>

                    <!-- Background Color -->
                    <VerticalStackLayout Spacing="5">
                        <Label Text="Background Color" FontSize="14" FontAttributes="Bold"/>
                        <Picker x:Name="BackgroundColorPicker"
                                SelectedIndexChanged="OnBackgroundColorChanged">
                            <Picker.ItemsSource>
                                <x:Array Type="{x:Type x:String}">
                                    <x:String>Dark (Default)</x:String>
                                    <x:String>Light</x:String>
                                    <x:String>Sepia</x:String>
                                    <x:String>High Contrast</x:String>
                                </x:Array>
                            </Picker.ItemsSource>
                        </Picker>
                    </VerticalStackLayout>

                    <!-- Text Color -->
                    <VerticalStackLayout Spacing="5">
                        <Label Text="Text Color" FontSize="14" FontAttributes="Bold"/>
                        <Picker x:Name="TextColorPicker"
                                SelectedIndexChanged="OnTextColorChanged">
                            <Picker.ItemsSource>
                                <x:Array Type="{x:Type x:String}">
                                    <x:String>White (Default)</x:String>
                                    <x:String>Black</x:String>
                                    <x:String>Green</x:String>
                                    <x:String>Amber</x:String>
                                </x:Array>
                            </Picker.ItemsSource>
                        </Picker>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Audio Settings Section -->
            <Frame BorderColor="{StaticResource ADRIFTPrimary}" Padding="15" CornerRadius="8">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Audio Settings" FontSize="18" FontAttributes="Bold"/>

                    <!-- Sound Effects -->
                    <VerticalStackLayout Spacing="5">
                        <Grid ColumnDefinitions="*,Auto">
                            <Label Grid.Column="0" Text="Sound Effects" FontSize="14" FontAttributes="Bold"
                                   VerticalOptions="Center"/>
                            <Switch Grid.Column="1" x:Name="SoundEffectsSwitch"
                                    IsToggled="True"
                                    Toggled="OnSoundEffectsToggled"/>
                        </Grid>
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="10"
                              IsVisible="{Binding IsToggled, Source={x:Reference SoundEffectsSwitch}}">
                            <Label Grid.Column="0" Text="ðŸ”‡" FontSize="16"/>
                            <Slider Grid.Column="1" x:Name="SoundVolumeSlider"
                                    Minimum="0" Maximum="100" Value="80"
                                    ValueChanged="OnSoundVolumeChanged"/>
                            <Label Grid.Column="2" Text="ðŸ”Š" FontSize="16"/>
                        </Grid>
                    </VerticalStackLayout>

                    <!-- Music -->
                    <VerticalStackLayout Spacing="5">
                        <Grid ColumnDefinitions="*,Auto">
                            <Label Grid.Column="0" Text="Background Music" FontSize="14" FontAttributes="Bold"
                                   VerticalOptions="Center"/>
                            <Switch Grid.Column="1" x:Name="MusicSwitch"
                                    IsToggled="False"
                                    Toggled="OnMusicToggled"/>
                        </Grid>
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="10"
                              IsVisible="{Binding IsToggled, Source={x:Reference MusicSwitch}}">
                            <Label Grid.Column="0" Text="ðŸ”‡" FontSize="16"/>
                            <Slider Grid.Column="1" x:Name="MusicVolumeSlider"
                                    Minimum="0" Maximum="100" Value="50"
                                    ValueChanged="OnMusicVolumeChanged"/>
                            <Label Grid.Column="2" Text="ðŸ”Š" FontSize="16"/>
                        </Grid>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Accessibility Settings Section -->
            <Frame BorderColor="{StaticResource ADRIFTPrimary}" Padding="15" CornerRadius="8">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Accessibility" FontSize="18" FontAttributes="Bold"/>

                    <!-- Screen Reader Support -->
                    <Grid ColumnDefinitions="*,Auto">
                        <Label Grid.Column="0" Text="Screen Reader Support" FontSize="14"
                               VerticalOptions="Center"/>
                        <Switch Grid.Column="1" x:Name="ScreenReaderSwitch"
                                IsToggled="False"
                                Toggled="OnScreenReaderToggled"/>
                    </Grid>

                    <!-- High Contrast Mode -->
                    <Grid ColumnDefinitions="*,Auto">
                        <Label Grid.Column="0" Text="High Contrast Mode" FontSize="14"
                               VerticalOptions="Center"/>
                        <Switch Grid.Column="1" x:Name="HighContrastSwitch"
                                IsToggled="False"
                                Toggled="OnHighContrastToggled"/>
                    </Grid>

                    <!-- Reduce Animations -->
                    <Grid ColumnDefinitions="*,Auto">
                        <Label Grid.Column="0" Text="Reduce Animations" FontSize="14"
                               VerticalOptions="Center"/>
                        <Switch Grid.Column="1" x:Name="ReduceAnimationsSwitch"
                                IsToggled="False"
                                Toggled="OnReduceAnimationsToggled"/>
                    </Grid>
                </VerticalStackLayout>
            </Frame>

            <!-- Gameplay Settings Section -->
            <Frame BorderColor="{StaticResource ADRIFTPrimary}" Padding="15" CornerRadius="8">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Gameplay" FontSize="18" FontAttributes="Bold"/>

                    <!-- Auto-Save -->
                    <Grid ColumnDefinitions="*,Auto">
                        <Label Grid.Column="0" Text="Auto-Save Every Turn" FontSize="14"
                               VerticalOptions="Center"/>
                        <Switch Grid.Column="1" x:Name="AutoSaveSwitch"
                                IsToggled="True"
                                Toggled="OnAutoSaveToggled"/>
                    </Grid>

                    <!-- Confirm on Exit -->
                    <Grid ColumnDefinitions="*,Auto">
                        <Label Grid.Column="0" Text="Confirm on Exit" FontSize="14"
                               VerticalOptions="Center"/>
                        <Switch Grid.Column="1" x:Name="ConfirmExitSwitch"
                                IsToggled="True"
                                Toggled="OnConfirmExitToggled"/>
                    </Grid>

                    <!-- Command History Size -->
                    <VerticalStackLayout Spacing="5">
                        <Label Text="Command History Size" FontSize="14" FontAttributes="Bold"/>
                        <Picker x:Name="HistorySizePicker"
                                SelectedIndexChanged="OnHistorySizeChanged">
                            <Picker.ItemsSource>
                                <x:Array Type="{x:Type x:String}">
                                    <x:String>10</x:String>
                                    <x:String>25</x:String>
                                    <x:String>50</x:String>
                                    <x:String>100</x:String>
                                </x:Array>
                            </Picker.ItemsSource>
                        </Picker>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Action Buttons -->
            <Grid ColumnDefinitions="*,*" ColumnSpacing="10" Margin="0,10">
                <Button Grid.Column="0" Text="Reset to Defaults"
                        Clicked="OnResetDefaultsClicked"
                        BackgroundColor="{StaticResource Gray500}"
                        TextColor="White"/>
                <Button Grid.Column="1" Text="Close"
                        Clicked="OnCloseClicked"
                        BackgroundColor="{StaticResource ADRIFTPrimary}"
                        TextColor="White"/>
            </Grid>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
