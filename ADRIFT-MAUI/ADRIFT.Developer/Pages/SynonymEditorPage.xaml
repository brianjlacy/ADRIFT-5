<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:ADRIFT.Developer.ViewModels"
             x:Class="ADRIFT.Developer.Views.SynonymEditorPage"
             x:DataType="vm:SynonymEditorViewModel"
             Title="Synonym Editor">
    <Grid RowDefinitions="*,Auto">
        <!-- Main content -->
        <ScrollView Grid.Row="0">
            <VerticalStackLayout Padding="16" Spacing="16">
                <!-- Header -->
                <Frame BackgroundColor="{StaticResource ADRIFTPrimary}" Padding="16" Margin="0" CornerRadius="8">
                    <Label Text="{Binding PageTitle}" FontSize="20" FontAttributes="Bold" TextColor="White" />
                </Frame>

                <!-- Original Word Section -->
                <Frame Padding="16" BorderColor="{StaticResource ADRIFTSecondary}">
                    <VerticalStackLayout Spacing="8">
                        <Label Text="Original Word" FontSize="16" FontAttributes="Bold" />
                        <Entry Text="{Binding OriginalWord}" Placeholder="Enter the original word..." />
                        <Label Text="The word that will be recognized in player commands" FontSize="12" TextColor="Gray" />
                    </VerticalStackLayout>
                </Frame>

                <!-- Synonyms Section -->
                <Frame Padding="16" BorderColor="{StaticResource ADRIFTSecondary}">
                    <VerticalStackLayout Spacing="12">
                        <Label Text="Synonyms" FontSize="16" FontAttributes="Bold" />
                        <Label Text="Alternative words that will be treated as the original word"
                               FontSize="12" TextColor="Gray" />

                        <!-- Add new synonym -->
                        <HorizontalStackLayout Spacing="8">
                            <Entry Text="{Binding NewSynonym}"
                                   Placeholder="Enter a synonym..."
                                   HorizontalOptions="FillAndExpand"
                                   Completed="OnNewSynonymCompleted" />
                            <Button Text="Add"
                                    Command="{Binding AddSynonymCommand}"
                                    WidthRequest="80"
                                    BackgroundColor="{StaticResource ADRIFTSecondary}" />
                        </HorizontalStackLayout>

                        <!-- Synonyms list -->
                        <Label Text="No synonyms added yet"
                               IsVisible="{Binding HasNoSynonyms}"
                               FontSize="14"
                               TextColor="Gray"
                               Margin="0,8" />

                        <CollectionView ItemsSource="{Binding Synonyms}"
                                        IsVisible="{Binding HasSynonyms}"
                                        SelectionMode="None">
                            <CollectionView.ItemTemplate>
                                <DataTemplate x:DataType="vm:SynonymItemViewModel">
                                    <SwipeView>
                                        <SwipeView.RightItems>
                                            <SwipeItem Text="Delete"
                                                       BackgroundColor="Red"
                                                       Command="{Binding Source={RelativeSource AncestorType={x:Type vm:SynonymEditorViewModel}}, Path=DeleteSynonymCommand}"
                                                       CommandParameter="{Binding}" />
                                        </SwipeView.RightItems>
                                        <Frame Padding="12" Margin="0,4" BorderColor="LightGray">
                                            <Grid ColumnDefinitions="*,Auto">
                                                <Label Grid.Column="0"
                                                       Text="{Binding Text}"
                                                       FontSize="16"
                                                       VerticalOptions="Center" />
                                                <Button Grid.Column="1"
                                                        Text="Ã—"
                                                        FontSize="20"
                                                        WidthRequest="40"
                                                        HeightRequest="40"
                                                        BackgroundColor="Red"
                                                        TextColor="White"
                                                        Command="{Binding Source={RelativeSource AncestorType={x:Type vm:SynonymEditorViewModel}}, Path=DeleteSynonymCommand}"
                                                        CommandParameter="{Binding}" />
                                            </Grid>
                                        </Frame>
                                    </SwipeView>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>

                        <!-- Synonym count -->
                        <Label Text="{Binding SynonymCount, StringFormat='{0} synonyms'}"
                               IsVisible="{Binding HasSynonyms}"
                               FontSize="12"
                               TextColor="Gray" />
                    </VerticalStackLayout>
                </Frame>

                <!-- Examples Section -->
                <Frame Padding="16" BorderColor="{StaticResource ADRIFTSecondary}" BackgroundColor="#F0F8FF">
                    <VerticalStackLayout Spacing="8">
                        <Label Text="Examples" FontSize="16" FontAttributes="Bold" />
                        <Label FontSize="12" TextColor="Gray">
                            <Label.FormattedText>
                                <FormattedString>
                                    <Span Text="Original: " FontAttributes="Bold" />
                                    <Span Text="examine" FontAttributes="Italic" />
                                    <Span Text="&#10;Synonyms: " />
                                    <Span Text="look at, inspect, check, search" FontAttributes="Italic" />
                                    <Span Text="&#10;&#10;Original: " FontAttributes="Bold" />
                                    <Span Text="north" FontAttributes="Italic" />
                                    <Span Text="&#10;Synonyms: " />
                                    <Span Text="n, northward, go north" FontAttributes="Italic" />
                                </FormattedString>
                            </Label.FormattedText>
                        </Label>
                    </VerticalStackLayout>
                </Frame>
            </VerticalStackLayout>
        </ScrollView>

        <!-- Action buttons -->
        <Grid Grid.Row="1"
              ColumnDefinitions="*,Auto,Auto"
              Padding="16"
              BackgroundColor="{StaticResource ADRIFTLight}"
              ColumnSpacing="12">
            <Button Grid.Column="0"
                    Text="Cancel"
                    Command="{Binding CancelCommand}"
                    BackgroundColor="Gray" />
            <Button Grid.Column="1"
                    Text="Apply"
                    Command="{Binding ApplyCommand}"
                    BackgroundColor="{StaticResource ADRIFTSecondary}"
                    IsVisible="{Binding IsEditMode}" />
            <Button Grid.Column="2"
                    Text="OK"
                    Command="{Binding SaveAndCloseCommand}"
                    BackgroundColor="{StaticResource ADRIFTPrimary}" />
        </Grid>
    </Grid>
</ContentPage>
